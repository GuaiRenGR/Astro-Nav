<!-- 自定义光标 -->
<div id="custom-cursor" class="custom-cursor hidden lg:block">
  <div class="cursor-dot"></div>
  <div class="cursor-ring"></div>
</div>

<script>
  const cursor = document.getElementById('custom-cursor');
  const cursorDot = cursor?.querySelector('.cursor-dot') as HTMLElement;
  const cursorRing = cursor?.querySelector('.cursor-ring') as HTMLElement;

  let mouseX = 0;
  let mouseY = 0;
  let dotX = 0;
  let dotY = 0;
  let ringX = 0;
  let ringY = 0;

  // 鼠标移动事件
  document.addEventListener('mousemove', (e) => {
    mouseX = e.clientX;
    mouseY = e.clientY;
  });

  // 动画循环
  function animateCursor() {
    // 内圆点跟随速度快
    dotX += (mouseX - dotX) * 0.3;
    dotY += (mouseY - dotY) * 0.3;

    // 外圆环跟随速度慢
    ringX += (mouseX - ringX) * 0.15;
    ringY += (mouseY - ringY) * 0.15;

    if (cursorDot) {
      cursorDot.style.left = `${dotX}px`;
      cursorDot.style.top = `${dotY}px`;
    }

    if (cursorRing) {
      cursorRing.style.left = `${ringX}px`;
      cursorRing.style.top = `${ringY}px`;
    }

    requestAnimationFrame(animateCursor);
  }

  animateCursor();

  // 悬停效果
  const interactiveElements = document.querySelectorAll('a, button, .site-card, input, select');

  interactiveElements.forEach(el => {
    el.addEventListener('mouseenter', () => {
      cursorRing?.classList.add('cursor-hover');
    });

    el.addEventListener('mouseleave', () => {
      cursorRing?.classList.remove('cursor-hover');
    });
  });

  // 点击效果
  document.addEventListener('mousedown', () => {
    cursorDot?.classList.add('cursor-click');
    cursorRing?.classList.add('cursor-click');
  });

  document.addEventListener('mouseup', () => {
    cursorDot?.classList.remove('cursor-click');
    cursorRing?.classList.remove('cursor-click');
  });

  // 隐藏默认光标
  document.body.style.cursor = 'none';
  interactiveElements.forEach(el => {
    (el as HTMLElement).style.cursor = 'none';
  });
</script>

<style>
  .custom-cursor {
    pointer-events: none;
    position: fixed;
    top: 0;
    left: 0;
    z-index: 9999;
  }

  .cursor-dot {
    position: fixed;
    width: 8px;
    height: 8px;
    background: #3B82F6;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.2s, height 0.2s, background 0.2s;
    will-change: left, top;
    pointer-events: none;
  }

  .cursor-ring {
    position: fixed;
    width: 32px;
    height: 32px;
    border: 2px solid #3B82F6;
    border-radius: 50%;
    transform: translate(-50%, -50%);
    transition: width 0.3s, height 0.3s, border-color 0.3s, border-radius 0.3s;
    will-change: left, top;
    pointer-events: none;
  }

  .cursor-ring.cursor-hover {
    width: 48px;
    height: 48px;
    border-color: #8B5CF6;
  }

  .cursor-dot.cursor-click {
    width: 12px;
    height: 12px;
    background: #8B5CF6;
  }

  .cursor-ring.cursor-click {
    width: 28px;
    height: 28px;
  }

  .dark .cursor-dot {
    background: #60A5FA;
  }

  .dark .cursor-ring {
    border-color: #60A5FA;
  }

  .dark .cursor-ring.cursor-hover {
    border-color: #A78BFA;
  }

  .dark .cursor-dot.cursor-click {
    background: #A78BFA;
  }

  /* 移动端隐藏 */
  @media (max-width: 1024px) {
    .custom-cursor {
      display: none !important;
    }
  }
</style>
